<?xml version="1.0" encoding="UTF-8"?>
<s:Skin name="table" class="table data-grid-skin"  xmlns:c="es.components" xmlns:s="es.core">
    <s:Metadata>[HostComponent("es.components.DataGrid")]</s:Metadata>
    <s:Script>
        <![CDATA[
           import es.events.PaginationEvent;
           import es.core.Display;
           import es.core.Skin;

           [Syntax("javascript")]
           override protected function updateDisplayList()
           {
                super.updateDisplayList();
                var hostComponent:* = this.hostComponent;
                var radius:String= hostComponent.radius+'px';
                var table:Element =  this.element;
                table.style('borderRadius', radius );
                Element('thead > tr:first-child >th:first-child' , table).style('borderTopLeftRadius',radius );
                Element('thead > tr:first-child >th:last-child' , table).style('borderTopRightRadius',radius );
                Element('tfoot > tr:last-child >td:first-child' , table).style('borderBottomLeftRadius',radius );
                Element('tfoot > tr:last-child >td:last-child' , table).style('borderBottomRightRadius',radius );
                Element('td',  (this.foot as Display).element ).height( hostComponent.footHeight );
            }

            override protected function initializing()
            {
                super.initializing();
                var hostComponent:DataGrid = this.hostComponent;
                if( hostComponent.isNeedCreateSkin() )
                {
                    var dataSource:DataSource =  hostComponent.dataSource;
                    var body:Skin = this.body;
                    var dataProfile:String =  hostComponent.dataProfile;
                    body.variable('rowHeight', hostComponent.rowHeight );
                    head.variable('headHeight', hostComponent.headHeight );
                    body.variable( dataProfile, [] );
                    body.variable( hostComponent.columnProfile, hostComponent.columns);
                    head.variable( hostComponent.columnProfile, hostComponent.columns );
                    pagination.dataSource = dataSource;

                    dataSource.addEventListener(DataSourceEvent.SELECT, function (event:DataSourceEvent)
                    {
                        if ( !event.waiting )
                        {
                            body.variable( dataProfile , event.data   );
                            body.display();
                        }
                    });
                    dataSource.select( pagination.current );
               }
            }
        ]]>
    </s:Script>
    <style file="DataGridStyle.less" />
    <s:Skin name="thead" id="@head">
        <s:template>
              <tr>
                  <:foreach name="columns" value="name" >
                      <th style="height:{headHeight}px;line-height:{headHeight}px;">{name}<span></span></th>
                  </:foreach>
              </tr>
         </s:template>
    </s:Skin>

    <s:Skin name="tbody" id="@body">
        <s:template>
            <:foreach name="datalist" value="item">
                <tr>
                    <:foreach name="columns" value="val" key="field">
                        <:switch condition="field">
                            <:case condition="name" break="true">
                                <td data-column="{field}" style="height:{rowHeight}px;line-height:{rowHeight}px;">
                                    <input value="{item[field]}" style="height: 25px;" />
                                </td>
                            </:case>
                            <:default>
                                <td data-column="{field}" style="height:{rowHeight}px;line-height:{rowHeight}px;">{item[field]}</td>
                            </:default>
                        </:switch>
                    </:foreach>
                </tr>
            </:foreach>
        </s:template>
    </s:Skin>

    <tfoot id="@foot">
         <tr>
             <td colspan="3">
                 <c:Pagination id="@pagination"  radius="3" async="@hostComponent.async">
                 </c:Pagination>
             </td>
         </tr>
    </tfoot>

</s:Skin>