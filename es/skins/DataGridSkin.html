<?xml version="1.0" encoding="UTF-8"?>
<s:Skin name="table" class="table data-grid-skin"  xmlns:c="es.components" xmlns:s="es.core">
    <s:Metadata>[HostComponent("es.components.DataGrid")]</s:Metadata>
    <![CDATA[
       import es.events.PaginationEvent;
       import es.core.Display;
       import es.core.Skin;

       [Syntax("javascript")]
       override protected function updateDisplayList()
       {
            super.updateDisplayList();
            var hostComponent:DataGrid = this.hostComponent;
            var radius:String= hostComponent.radius+'px';
            var table:Element =  this.element;
            table.style('borderRadius', radius );
            Element('thead > tr:first-child >th:first-child' , table).style('borderTopLeftRadius',radius );
            Element('thead > tr:first-child >th:last-child' , table).style('borderTopRightRadius',radius );
            Element('tfoot > tr:last-child >td:first-child' , table).style('borderBottomLeftRadius',radius );
            Element('tfoot > tr:last-child >td:last-child' , table).style('borderBottomRightRadius',radius );
            Element('td',  (this.foot as Display).element ).height( hostComponent.footHeight );
        }

        override protected function initializing()
        {
            var hostComponent:DataGrid = this.hostComponent;
            var dataSource:DataSource =  hostComponent.dataSource;
            var body:Skin = this.body;
            var dataProfile:String =  hostComponent.dataProfile();
            body.variable('rowHeight', hostComponent.rowHeight );
            head.variable('headHeight', hostComponent.headHeight );
            body.variable( dataProfile, [] );
            head.variable( hostComponent.columnProfile(), hostComponent.columns );
            pagination.dataSource = dataSource;

            var _wheelTarget:Display = hostComponent.wheelTarget;
            if( !_wheelTarget ){
                 _wheelTarget = this.foot;
            }

            if( hostComponent.wheelEnable )
            {
               pagination.wheelTarget = _wheelTarget;
            }

            dataSource.addEventListener(DataSourceEvent.SELECT, function (event:DataSourceEvent)
            {
                if ( !event.waiting )
                {
                    body.variable( dataProfile , event.data );
                    body.display();
                }
            });
            dataSource.select(1);
        }
    ]]>

    <style>

        @radius:5px;
        @border_color:darken(@secondary, 3.5%);
        @background_color:@secondary;

        .data-grid-skin {
            border-collapse: separate;
            *border-collapse: collapse; /* IE7 and lower */
            border-spacing: 0;
            width: 100%;
            border:1px solid @border_color;
            margin:0px;
            .border-radius( @radius, @radius,  @radius,  @radius);
            .box-shadow( 0px 1px 3px rgba(0,0,0,.3) );
        }

        /*ie6*/
        .data-grid-skin tbody td,
        .data-grid-skin thead th{
            border-left: 1px solid @border_color;
            border-top: 1px solid @border_color;
            text-align: left;
            margin: 0px;
            padding: 4px;
        }
        .data-grid-skin thead th{
            background-color: @background_color;
        }

        .data-grid-skin > thead > tr > td,
        .data-grid-skin > thead > tr > th,
        .data-grid-skin > tbody > tr > td
        {
            border-left: 1px solid @border_color;
            border-top: 1px solid @border_color;
            text-align: left;
            margin: 0px;
            padding: 4px;
        }

        .data-grid-skin > tbody > tr:hover {
            background: #fbf8e9;
            .transition(all 0.1s ease-in-out);
        }

        .data-grid-skin > thead > tr:first-child > th {
            border-top: none;
            line-height: 25px;
            background-color: @background_color;
            background-clip: padding-box;
            position:relative;
           .gradient-vertical( lighten(@background_color, 6.5%),  @background_color );
           .box-shadow( 0px 1px 0px rgba(255,255,255,.8) inset );
        }

        .data-grid-skin > thead > tr:last-child > th {
            border-bottom: none;
        }

        .data-grid-skin > tbody > tr:last-child > td {
            border-bottom: 1px solid @border_color;
        }

        .data-grid-skin > tbody > tr > td:first-child,
        .data-grid-skin > thead > tr > th:first-child {
            border-left: none;
        }

        .data-grid-skin > thead > tr:first-child > th:first-child {
            border-top-left-radius:@radius;
        }

        .data-grid-skin > thead > tr:first-child > th:last-child
        {
            border-top-right-radius:@radius;
        }

        .data-grid-skin > tfoot > tr:last-child > td:first-child {
            border-bottom-left-radius:@radius;
            border-top: none;
        }

        .data-grid-skin > tfoot > tr:last-child > td:last-child {
            border-bottom-right-radius:@radius;
        }

    </style>

    <s:Skin name="thead" id="@head">
        <s:template>
              <tr>
                  <:foreach name="columns" value="name" >
                      <th style="height:{headHeight}px;line-height:{headHeight}px;">{name}<span></span></th>
                  </:foreach>
              </tr>
         </s:template>
    </s:Skin>

    <s:Skin name="tbody" id="@body">
        <s:template>
            <:foreach name="datalist" value="item">
                <tr>
                    <:foreach name="item" value="val" key="ukey">
                        <:switch condition="ukey">
                            <:case condition="name" break="true">
                                <td data-column="{key}" style="height:{rowHeight}px;line-height:{rowHeight}px;">
                                    <input value="{val}" style="height: 25px;" />
                                </td>
                            </:case>
                            <:default>
                                <td data-column="{key}" style="height:{rowHeight}px;line-height:{rowHeight}px;">{val}</td>
                            </:default>
                        </:switch>
                    </:foreach>
                </tr>
            </:foreach>
        </s:template>
    </s:Skin>

    <tfoot id="@foot">
         <tr>
             <td colspan="3">
                 <c:Pagination id="@pagination"  radius="3"  skinClass="es.skins.PaginationSkin">
                 </c:Pagination>
             </td>
         </tr>
    </tfoot>

</s:Skin>