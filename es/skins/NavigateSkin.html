<?xml version="1.0" encoding="UTF-8"?>
<s:Skin xmlns:s="es.core" class="navigate">
    <s:Metadata>[HostComponent("es.components.Navigate")]</s:Metadata>
    <s:Script>
    <![CDATA[

        import es.events.NavigateEvent;
        override protected function initializing()
        {
            var hostComponent:Navigate = this.hostComponent;
            var dataProfile:String =  hostComponent.dataProfile;
            var self:Skin = this;
            this.element.addEventListener( MouseEvent.CLICK, function(e:MouseEvent){
                if( Element.getNodeName(e.target) === "a" && Element.getNodeName(e.target.parentNode)==="li"  )
                {
                    var event:NavigateEvent = new NavigateEvent( NavigateEvent.URL_JUMP_BEFORE );
                    event.content = this.property("href");
                    event.originalEvent = e;
                    var datalist:Array = self.assign( dataProfile ) as Array;
                    for(var i:int in datalist){
                        if(datalist[i].link===event.content)
                        {
                           event.item=datalist[i];
                           break;
                        }
                    }
                    hostComponent.dispatchEvent(event);
                }
            });
        }

        override protected function updateDisplayList()
        {
            super.updateDisplayList();
            console.log( this.dataset );
        }

        override protected function updateChildren(parent:Object, children:Array):void
        {
            super.updateChildren(parent,children);
            console.log( parent, children );
        }
    ]]>
    </s:Script>
    <style file="NavigateStyle.less" />
    <ul class="nav nav-pills">
        <:foreach name="datalist" value="item" key="link">
            <:if condition="dataset.match(item,link)">
                <li role="presentation" class="active"><a href="{item.link}" target="{openTarget? '_blank' : '_self'}">{item.label}</a></li>
            <:else />
                <li role="presentation"><a href="{item.link}" target="{openTarget ? '_blank' : '_self'}">{item.label}</a></li>
            </:if>
        </:foreach>
    </ul>
</s:Skin>