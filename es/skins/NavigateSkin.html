<?xml version="1.0" encoding="UTF-8"?>
<s:Skin xmlns:s="es.core" class="navigate">
    <s:Metadata>[HostComponent("es.components.Navigate")]</s:Metadata>
    <s:Script>
    <![CDATA[

        import es.events.NavigateEvent;
        private onClick(e:MouseEvent)
        {
            var hostComponent:Navigate = this.hostComponent;
            var target:Element = new Element( e.target );
            var href:String = target.property("href") as String;
            if( href === hostComponent.current )
            {
                e.preventDefault();
                return false; 
            }

            var dataProfile:String =  hostComponent.dataProfile;
            var event:NavigateEvent = new NavigateEvent( NavigateEvent.URL_JUMP_BEFORE );
            event.content = href;
            event.originalEvent = e;
            var datalist:Array = this.assign( dataProfile ) as Array;
            if( datalist )
            {
                for(var i:int in datalist)
                {
                    if(datalist[i].link===event.content)
                    {
                        event.item=datalist[i] as Object;
                        break;
                    }
                }
            }
            hostComponent.dispatchEvent(event);
        }

    ]]>
    </s:Script>
    
    <style file="NavigateStyle.less" />

    <s:Declare>
       const {
           datalist:Array=[],
           openTarget:Boolean=false,
           match:Function
        } = dataset;
    </s:Declare>

    <ul class="nav nav-pills">
        <:foreach name="datalist" value="item" key="link">
            <:if condition="match(item,link)">
                <li role="presentation" class="active">
                    <a href="{item.link}" onClick="{this.onClick}" target="{openTarget? '_blank' : '_self'}">{item.label}</a>
                </li>
            <:else />
                <li role="presentation">
                    <a href="{item.link}" onClick="{this.onClick}" target="{openTarget ? '_blank' : '_self'}">{item.label}</a>
                </li>
            </:if>
        </:foreach>
    </ul>
</s:Skin>