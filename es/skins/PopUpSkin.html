<?xml version="1.0" encoding="UTF-8"?>
<s:Skin class="popup" tabindex="-1" xmlns:c="es.components" xmlns:s="es.core">
    <s:Metadata>[HostComponent("es.core.PopUp")]</s:Metadata>
    <s:Script>
    <![CDATA[
        private var _makeMap:Object={};
        private makeAction(name:String):Function
        {
            if( _makeMap.hasOwnProperty(name) )
            {
                return _makeMap[name] as Function;
            }
            var fn:Function = hostComponent.action.bind(hostComponent, name);
            _makeMap[name] = fn;
            return fn;
        }
    ]]>
    </s:Script>
    <style file="PopUpStyle.less" />
    <s:states>
        <s:State name="tips" stateGroup="simple" />
        <s:State name="title" stateGroup="simple" />
        <s:State name="alert" stateGroup="normal" />
        <s:State name="confirm" stateGroup="normal" />
        <s:State name="modality" stateGroup="normal" />
    </s:states>
    <s:currentState>alert</s:currentState>
    <s:Declare>
       const {
           titleText:*="title",
           closeText:*="×",
           submitText:*="确 定",
           cancelText:*="取 消",
           headHeight:uint=NaN,
           footerHeight:uint=NaN,
           bodyHeight:uint=NaN,
           bodyWidth:uint=NaN,
           height:uint=NaN,
           width:uint=NaN,
           left:uint=NaN,
           top:uint=NaN,
           right:uint=NaN,
           bottom:uint=NaN
           } = dataset;
    </s:Declare>

    <s:Container
         name="div" 
         class="popup-container fixed"
         id="@mainContainer"
         left="{left}" 
         top="{top}" 
         right="{right}" 
         bottom="{bottom}" 
         width="{width}"
         height="{height}"
        class.modality="popup-container fixed popup-lg">

            <s:Container class="popup-head" id="@head" height="{headHeight}" excludeFrom="tips">
                <span class="popup-title">{titleText}</span>
                <button type="button" class="close" excludeFrom="title" onClick="{makeAction('close')}">{closeText}</button>
            </s:Container>

            <s:Container class="popup-body" id="@body" width="{bodyWidth}" height="{bodyHeight}" >
                {children}
            </s:Container>

            <s:Container class="popup-footer" id="@footer" heigth="{footerHeight}" excludeFrom="simple">

                <button type="button" 
                    class="btn btn-sm btn-default" 
                    class.modality="btn btn-default" 
                    onClick="{makeAction('cancel')}"
                    excludeFrom="alert">
                    {cancelText}
                </button>

                <button type="button" 
                    class="btn btn-sm btn-primary" 
                    onClick="{makeAction('submit')}"
                    class.modality="btn btn-sm btn-primary">
                    {submitText}
                </button>

            </s:Container>

    </s:Container>
</s:Skin>